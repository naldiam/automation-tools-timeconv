<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Time & SLA Converter</title>

<link rel="stylesheet" href="css/time-converter.css">

<style>
body {
  font-family: Inter, system-ui, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  padding: 32px;
}

.wrapper {
  max-width: 1100px;
  margin: auto;
}

.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}

.card {
  background: #020617;
  border-radius: 14px;
  padding: 24px;
  box-shadow: 0 10px 30px rgba(0,0,0,.4);
  border: 1px solid #1e293b;
}

h1, h2 {
  margin-top: 0;
}

.muted {
  color: #94a3b8;
  font-size: 14px;
}

label {
  display: block;
  margin-top: 14px;
  font-weight: 600;
}

input {
  width: 93%;
  padding: 12px;
  margin-top: 6px;
  border-radius: 8px;
  background: #020617;
  color: #e5e7eb;
  border: 1px solid #1e293b;
}

input::placeholder {
  color: #64748b;
}

button {
  margin-top: 18px;
  padding: 14px;
  width: 100%;
  border-radius: 8px;
  border: none;
  background: #dc2626;
  color: white;
  font-weight: 700;
  cursor: pointer;
}

button:hover {
  opacity: 0.9;
}

.result {
  margin-top: 20px;
  padding: 16px;
  border: 1px solid #1e293b;
  border-radius: 8px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
}

th, td {
  border: 1px solid #1e293b;
  padding: 10px;
}

th {
  background: #020617;
}

.right {
  text-align: right;
  font-weight: 200;
}

footer {
  margin-top: 48px;
  text-align: center;
  font-size: 13px;
  color: #94a3b8;
}

/* responsive */
@media (max-width: 900px) {
  .grid {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>
<div class="wrapper">

  <div class="grid">

    <!-- LEFT -->
    <div class="card">
      <h2>‚è± Time Duration Converter</h2>
      <p class="muted">Format: DD/MM/YYYY / HH:mm</p>

      <label>Start Time</label>
      <input id="startText" placeholder="12/11/2025 / 02:18">

      <label>End Time</label>
      <input id="endText" placeholder="12/11/2025 / 02:30">

      <button onclick="calcDuration()">Calculate Duration</button>

      <div id="durationOutput" class="result"></div>
    </div>

    <!-- RIGHT -->
    <div class="card">
      <h2>üìâ Reverse SLA Calculator</h2>
      <p class="muted">Calculate SLA uptime from downtime duration</p>

      <label>Downtime Duration</label>
      <input id="downtimeInput" placeholder="2h 20m 0s">

      <button onclick="calcSLA()">Calculate SLA</button>

      <div id="slaOutput" class="result"></div>
    </div>

  </div>

  <footer>
    ¬© 2025 ‚Äî <strong>Rinaldi Adi Mulia</strong> ¬∑ Official Product
  </footer>

</div>

<script>
/* =====================
   TIME CONVERTER
===================== */
function parseDate(str) {
  const m = str.match(/(\d{2})\/(\d{2})\/(\d{4})\s*\/\s*(\d{2}):(\d{2})/);
  if (!m) return null;
  return new Date(`${m[3]}-${m[2]}-${m[1]}T${m[4]}:${m[5]}:00`);
}

function calcDuration() {
  const s = parseDate(startText.value.trim());
  const e = parseDate(endText.value.trim());

  if (!s || !e || e <= s) {
    alert("Invalid date format or range");
    return;
  }

  const diff = e - s;
  const sec = Math.floor(diff / 1000);
  const min = Math.floor(sec / 60);
  const hr  = Math.floor(min / 60);

  durationOutput.innerHTML = `
    <strong>From:</strong> ${s.toLocaleString()}<br>
    <strong>To:</strong> ${e.toLocaleString()}<br><br>

    <strong>Duration</strong>
    <ul>
      <li>${hr} hours ${min % 60} minutes ${sec % 60} seconds</li>
      <li>${min.toLocaleString()} minutes</li>
      <li>${sec.toLocaleString()} seconds</li>
    </ul>
  `;
}

/* =====================
   SLA CALCULATOR
===================== */
function parseDowntime(str) {
  let sec = 0;
  const h = str.match(/(\d+)h/);
  const m = str.match(/(\d+)m/);
  const s = str.match(/(\d+)s/);
  if (h) sec += +h[1] * 3600;
  if (m) sec += +m[1] * 60;
  if (s) sec += +s[1];
  return sec;
}

function uptime(total, down) {
  return (((total - down) / total) * 100).toFixed(4);
}

function calcSLA() {
  const txt = downtimeInput.value.trim();
  const down = parseDowntime(txt);
  if (!down) return alert("Use format: 2h 20m 0s");

  const periods = [
    ["Daily reporting",     86400],
    ["Weekly reporting",    604800],
    ["Monthly reporting",   2629746],
    ["Quarterly reporting", 7776000],
    ["Yearly reporting",    31536000],
  ];

  slaOutput.innerHTML = `
    <p class="muted">
      Downtime with a duration of <strong>${txt}</strong>
      during a reporting period is equal to the following SLA uptime percentages:
    </p>

    <table>
      <thead>
        <tr>
          <th>SLA percentage by reporting period</th>
          <th class="right">Uptime %</th>
        </tr>
      </thead>
      <tbody>
        ${periods.map(p => `
          <tr>
            <td>${p[0]}</td>
            <td class="right">${uptime(p[1], down)} %</td>
          </tr>
        `).join("")}
      </tbody>
    </table>
  `;
}
</script>
</body>
</html>
